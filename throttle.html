<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>节流</title>
</head>
<body>


<input type="text" id="throttle">


<script>
    window.onload = function () {
        //模拟ajax请求
        function ajax(content) {
            console.log("ajax request:------ " + content);
        }

        function throttle(fun, delay) {
            let last, deferTimer;
            return function (args) {
                let that = this;
                let _args = arguments;
                var now = +new Date();
                if (last && now < last + delay) {
                    clearTimeout(deferTimer);
                    deferTimer = setTimeout(function () {
                        last = now;
                        fun.apply(that, _args);
                    }, delay);
                } else {
                    last = now;
                    fun.apply(that, _args);
                }
            }
        }

        function throttle(cb, delay = 200) {
            var _this = this;
            let now = Date.now();
            return function () {
                if (Date.now() - now < delay) return;
                cb && cb.apply(_this, arguments);
                now = Date.now();
            }
        }
        var throttleAjax = throttle(ajax, 1000);
        var throttleInput = document.getElementById("throttle");
        throttleInput.addEventListener("keyup", function (e) {
            throttleAjax(e.target.value);
        })

    }



    function callSomeFunction(someFunction,someArguments){
    	return someFunction(someArguments);
    }

    function add10(num){
    	return num+10;
    }

    var result1=callSomeFunction(add10,10);
    console.log(result1);//20

    function getGreeting(name){
    	return "Hello " + name;
    }

    var result2=callSomeFunction(getGreeting,"peter");
    console.log(result2);//Hello peter

    function createComparisonFunction(properyName){
    	return function(object1,object2){
    		var value1=object1[properyName];
    		var value2=object2[properyName];
    		if(value1<value2){
    			return -1;
    		}else if(value1>value2){
    			return 1;
    		}else{
    			return 0;
    		}
    	};
    }

    var data=[{"name":"zhang",age:28},{"name":"yang",age:29}];
    var sortByName=data.sort(createComparisonFunction("name"));
    console.log(sortByName[0].name);// yang
    var sortByAge=data.sort(createComparisonFunction("age"));
    console.log(sortByAge[0].name);// zhang






</script>






</body>
</html>
